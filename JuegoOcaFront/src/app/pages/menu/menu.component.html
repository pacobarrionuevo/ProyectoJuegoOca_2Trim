<div class="menu">
  <div class="perfil">
    <div>
      <img [src]="usuarioFotoPerfil" alt="Foto de Perfil" class="perfil-foto">
      <br>
      <span class="perfil-apodo">{{ usuarioApodo }}</span>
    </div>
    <br>
    <div class="botones">
      <button [routerLink]="'/perfil'" class="perfilButton">PERFIL</button>
      <button (click)="logout()" class="cerrar-sesion-btn">CERRAR SESIÃ“N</button>
    </div>
  </div>

  <br>

  <div class="elementosMenu">
    <p class="titulo">Solicitudes de Amistad</p>
    <div *ngFor="let solicitud of solicitudesPendientes">
      <img *ngIf="solicitud.usuario?.UsuarioFotoPerfil" [src]="solicitud.usuario.UsuarioFotoPerfil" alt="Foto de perfil" width="50" height="50">
      <span>{{ solicitud.usuario?.UsuarioApodo || 'Usuario desconocido' }}</span>
      <button (click)="aceptarSolicitud(solicitud.amistad.AmistadId)">Aceptar</button>
      <button (click)="rechazarSolicitud(solicitud.amistad.AmistadId)">Rechazar</button>
    </div>
    
  </div>

  <br>

  <div class="elementosMenu">
    <p class="titulo">Solicitudes de Partidas</p>
  </div>

  <br>

  <div class="elementosMenu">
    <p class="titulo">Amigos</p>
    <input type="text" class="lista" [(ngModel)]="busquedaAmigos" placeholder="Buscar amigos..." />
    <div class="lista" *ngFor="let amigo of amigosFiltrados">
      <img *ngIf="amigo.UsuarioFotoPerfil" [src]="getFotoPerfilUrl(amigo.UsuarioFotoPerfil)" alt="Foto de perfil" width="100"> 
      <p><strong> {{ amigo.UsuarioApodo || 'Sin apodo' }} </strong></p>&nbsp;
      
      <button [routerLink]="'/perfil'">Ver perfil</button>&nbsp;
      <button>Invitar a partida</button>&nbsp;
    </div>
  </div>

  <br>

  <div class="elementosMenu">
    <p class="titulo">Buscar Usuarios</p>
    <input type="text" [(ngModel)]="terminoBusqueda" placeholder="Buscar usuarios..." />
    <button (click)="buscarUsuarios()">Buscar</button>
    <br>
    <div *ngFor="let usuario of usuariosFiltrados">
      <img [src]="usuario.UsuarioFotoPerfil" alt="Foto de perfil" width="50" height="50">&nbsp;
      <span>{{ usuario.UsuarioApodo }}</span>&nbsp;
      <button class="botonesListaUsuario" [routerLink]="'/perfil'">Ir al Perfil</button>&nbsp;
      <button (click)="enviarSolicitud(usuario.UsuarioId)">Enviar Solicitud</button>
    </div>
  </div>
</div>